{
  "project": "cms-ai",
  "version": "1.1.0",
  "description": "Fix export jobs stuck in Queued status - complete the async export pipeline",
  "stories": [
    {
      "id": "CRITICAL-002",
      "title": "Fix export jobs stuck in Queued status",
      "description": "Export jobs are created successfully but remain stuck in 'Queued' status instead of processing to completion with asset ID generation",
      "priority": 0,
      "status": "completed",
      "acceptance_criteria": [
        "Export jobs transition from 'Queued' to 'Processing' to 'Completed' status",
        "Worker processes export jobs and generates PPTX files",
        "Export completion returns asset ID for download",
        "Job status updates are reflected in database",
        "Worker logs show successful job processing"
      ]
    },
    {
      "id": "STORY-004",
      "title": "Verify worker is processing export jobs",
      "description": "Ensure the worker service is actively polling and processing queued export jobs with the fixed olama renderer",
      "priority": 1,
      "status": "completed",
      "acceptance_criteria": [
        "Worker service is running and polling for jobs",
        "Worker picks up export jobs from queue",
        "Worker executes Python PPTX renderer with olama AI",
        "Worker updates job status during processing",
        "Worker handles errors and retries appropriately"
      ]
    },
    {
      "id": "STORY-005",
      "title": "Debug Python renderer execution in Railway environment",
      "description": "Ensure the Python renderer with olama AI works correctly in the Railway deployment environment",
      "priority": 1,
      "status": "completed",
      "acceptance_criteria": [
        "Python script paths resolve correctly in Railway container",
        "Python dependencies are available during execution",
        "Olama AI modules import and execute without errors",
        "PPTX files are generated successfully",
        "Generated files are stored and accessible"
      ]
    },
    {
      "id": "STORY-006",
      "title": "Verify asset storage and ID generation",
      "description": "Ensure completed exports generate asset records with downloadable IDs",
      "priority": 1,
      "status": "completed",
      "acceptance_criteria": [
        "Completed PPTX files are stored in object storage",
        "Asset records are created in database",
        "Asset IDs are returned to client",
        "Assets are downloadable via asset ID",
        "Export completion includes asset reference"
      ]
    }
  ],
  "technical_context": {
    "project_status": "ALL STORIES COMPLETED - PPTX export functionality fully restored",
    "final_resolution": "Complete asset storage and ID generation pipeline validated",
    "critical_fixes_applied": [
      "Go renderer paths with smart fallback logic for Railway deployment",
      "Python dependencies configured via web/nixpacks.toml for Railway",
      "Worker asset workflow fixed to include storage paths in database",
      "Comprehensive integration tests covering all acceptance criteria",
      "Error handling and retry mechanisms validated"
    ],
    "git_safety_incident": {
      "issue": "Git staged entire repository for deletion during development",
      "root_cause": "Using relative paths (../progress.txt) from server/ subdirectory caused git path confusion",
      "resolution": "Reset staged changes and work from repository root",
      "prevention": "Always work from git repository root, use absolute paths, verify git status before commits"
    },
    "deployment_validation": {
      "local_development": "All tests passing, export jobs processing correctly",
      "railway_environment": "Smart path resolution ensures Python renderer works correctly",
      "asset_storage": "Files stored with proper database records and downloadable asset IDs"
    }
  }
}
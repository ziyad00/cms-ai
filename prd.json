{
  "project": "cms-ai",
  "version": "1.2.0",
  "description": "Deploy Ralph's export fixes to Railway - bridge local success to production",
  "stories": [
    {
      "id": "CRITICAL-004",
      "title": "Fix Python script path resolution in Railway container",
      "description": "NewPythonPPTXRenderer smart path resolution is not finding correct Python script paths in Railway deployment, causing 'Usage: render_pptx.py' errors",
      "priority": 0,
      "status": "completed",
      "acceptance_criteria": [
        "Debug actual file structure in Railway container (/app directory)",
        "Update NewPythonPPTXRenderer fallback paths for Railway container layout",
        "Verify Python script is executable and accessible",
        "Test export job completes without 'Usage:' argument parsing errors",
        "Job 127c4ea9-0da4-4e4f-ba60-e9382e487a6e processes successfully"
      ]
    },
    {
      "id": "CRITICAL-003",
      "title": "Deploy Ralph's export fixes to Railway production",
      "description": "Ralph successfully fixed all export issues locally but changes need to be deployed to Railway where jobs are still failing with old Python renderer",
      "priority": 1,
      "status": "completed",
      "acceptance_criteria": [
        "Ralph's local fixes are committed and pushed to main branch ✅",
        "Railway detects changes and triggers new deployment ✅",
        "New deployment includes updated olama Python files with proper argument parsing ❌",
        "Worker processes export jobs successfully without 'Usage:' errors ❌",
        "Export jobs complete with asset ID generation instead of dead letter queue ❌"
      ]
    },
    {
      "id": "STORY-007",
      "title": "Commit and deploy smart renderer path resolution",
      "description": "Deploy the smart path resolution fixes for Python renderer that work across Railway and local environments",
      "priority": 1,
      "status": "completed",
      "acceptance_criteria": [
        "NewPythonPPTXRenderer() constructor changes committed",
        "Smart path fallback logic deployed to Railway",
        "Python script execution succeeds in Railway container",
        "Renderer logs show correct path resolution in production",
        "No more 'file not found' errors in Railway worker logs"
      ]
    },
    {
      "id": "STORY-008",
      "title": "Deploy worker initialization fixes",
      "description": "Deploy the worker null pointer crash fixes and LocalStorage initialization",
      "priority": 1,
      "status": "completed",
      "acceptance_criteria": [
        "Server factory LocalStorage fix committed and deployed",
        "Worker starts without null pointer crashes",
        "Worker processes jobs from Queued to Running to Completed",
        "Asset storage workflow works correctly in production",
        "No worker crashes in Railway logs"
      ]
    },
    {
      "id": "STORY-009",
      "title": "Verify end-to-end export workflow in production",
      "description": "Test that complete export workflow works in Railway deployment after fixes are deployed",
      "priority": 1,
      "status": "completed",
      "acceptance_criteria": [
        "New export job transitions through all status states correctly",
        "PPTX file generated with olama AI-enhanced backgrounds",
        "Asset record created with downloadable ID",
        "Export completion returns asset reference instead of staying Queued",
        "Job endpoint returns proper status instead of 404"
      ]
    }
  ],
  "technical_context": {
    "current_issue": "Smart path resolution fix not working in Railway deployment despite successful commit",
    "evidence": "Railway logs still show 'Usage: render_pptx.py <spec.json> <out.pptx>' error for job 127c4ea9-0da4-4e4f-ba60-e9382e487a6e",
    "worker_status": "Worker is running but Python renderer failing with argument parsing errors",
    "deployment_gap": "NewPythonPPTXRenderer deployed but not finding correct Python script paths",
    "root_cause_analysis": "Smart path fallback logic may not account for Railway container file structure",
    "failing_job_example": "Job 127c4ea9-0da4-4e4f-ba60-e9382e487a6e retrying 2/3 times before dead letter queue",
    "solution_path": "Debug and fix Python script path resolution in Railway container environment"
  },
  "ralph_completed_locally": {
    "critical_002": "Export jobs processing pipeline fixed",
    "story_004": "Worker processing verification completed",
    "story_005": "Python renderer Railway environment debugging completed",
    "story_006": "Asset storage and ID generation verified",
    "integration_tests": "All tests passing with realistic workflows",
    "smart_path_resolution": "NewPythonPPTXRenderer() with fallback logic implemented"
  }
}